<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Dropdown Test Page</title>
    <style>
        /* Basic reset and mobile optimization */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .test-header {
            text-align: center;
            color: white;
            margin-bottom: 2rem;
        }

        .test-section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .device-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .device-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            background: #667eea;
            color: white;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s;
        }

        .device-btn:hover {
            background: #5a6fd8;
        }

        .device-btn.active {
            background: #4c51bf;
        }

        /* Test dropdown styles */
        .test-dropdown {
            position: relative;
            display: inline-block;
            margin: 10px;
        }

        .dropdown-trigger {
            padding: 12px 20px;
            background: #3182ce;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        .dropdown-trigger:hover {
            background: #2c5282;
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            min-width: 200px;
            z-index: 1000;
            overflow: hidden;
            margin-top: 4px;
        }

        .dropdown-item {
            padding: 12px 16px;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            cursor: pointer;
            font-size: 14px;
            border-bottom: 1px solid #f7fafc;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        .dropdown-item:hover {
            background: #f7fafc;
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        /* Mobile responsive styles */
        @media (max-width: 414px) {
            .dropdown-menu.mobile {
                position: fixed !important;
                top: 50% !important;
                left: 50% !important;
                transform: translate(-50%, -50%) !important;
                width: calc(100vw - 2rem) !important;
                max-width: 300px !important;
                max-height: calc(100vh - 8rem) !important;
                overflow-y: auto !important;
                -webkit-overflow-scrolling: touch !important;
                overscroll-behavior: contain !important;
            }

            .dropdown-item.mobile {
                min-height: 44px !important;
                padding: 12px 16px !important;
            }
        }

        @media (max-width: 375px) {
            .dropdown-menu.mobile {
                width: calc(100vw - 1rem) !important;
                max-height: calc(100vh - 6rem) !important;
            }
        }

        .mobile-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.3);
            z-index: 999;
            backdrop-filter: blur(4px);
        }

        .viewport-info {
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-family: monospace;
            z-index: 10000;
        }

        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .test-results {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            font-family: monospace;
            font-size: 12px;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="viewport-info" id="viewportInfo">
        Loading...
    </div>

    <div class="container">
        <div class="test-header">
            <h1>üì± Mobile Dropdown Responsiveness Test</h1>
            <p>Test dropdown components across different mobile device sizes</p>
        </div>

        <div class="test-section">
            <h2>Device Simulation</h2>
            <div class="device-buttons">
                <button class="device-btn" data-device="iPhone SE" data-width="375" data-height="667">iPhone SE</button>
                <button class="device-btn" data-device="iPhone 12/13/14" data-width="390" data-height="844">iPhone 12/13/14</button>
                <button class="device-btn" data-device="iPhone 11" data-width="414" data-height="896">iPhone 11</button>
                <button class="device-btn" data-device="Galaxy S21" data-width="360" data-height="800">Galaxy S21</button>
                <button class="device-btn" data-device="iPad Mini" data-width="768" data-height="1024">iPad Mini</button>
                <button class="device-btn" data-device="Desktop" data-width="1200" data-height="800">Desktop</button>
            </div>
        </div>

        <div class="test-section">
            <h2>Dropdown Tests</h2>
            <p>Click the dropdowns below to test their behavior on different screen sizes:</p>
            
            <div class="test-grid">
                <div class="test-dropdown">
                    <button class="dropdown-trigger" onclick="toggleDropdown('dropdown1')">
                        Basic Dropdown
                    </button>
                    <div class="dropdown-menu" id="dropdown1" style="display: none;">
                        <button class="dropdown-item">Profile Settings</button>
                        <button class="dropdown-item">Account</button>
                        <button class="dropdown-item">Notifications</button>
                        <button class="dropdown-item">Privacy</button>
                        <button class="dropdown-item">Help & Support</button>
                        <button class="dropdown-item">Sign Out</button>
                    </div>
                </div>

                <div class="test-dropdown">
                    <button class="dropdown-trigger" onclick="toggleDropdown('dropdown2')">
                        Long Content Dropdown
                    </button>
                    <div class="dropdown-menu" id="dropdown2" style="display: none;">
                        <button class="dropdown-item">Home Dashboard</button>
                        <button class="dropdown-item">Members Management</button>
                        <button class="dropdown-item">Attendance Tracking</button>
                        <button class="dropdown-item">Events & Meetings</button>
                        <button class="dropdown-item">Financial Reports</button>
                        <button class="dropdown-item">Communication Tools</button>
                        <button class="dropdown-item">Settings & Configuration</button>
                        <button class="dropdown-item">User Permissions</button>
                        <button class="dropdown-item">Data Backup</button>
                        <button class="dropdown-item">Import/Export</button>
                        <button class="dropdown-item">Help Documentation</button>
                        <button class="dropdown-item">Contact Support</button>
                        <button class="dropdown-item">About Application</button>
                        <button class="dropdown-item">Sign Out</button>
                    </div>
                </div>

                <div class="test-dropdown">
                    <button class="dropdown-trigger" onclick="toggleDropdown('dropdown3')">
                        Actions Menu
                    </button>
                    <div class="dropdown-menu" id="dropdown3" style="display: none;">
                        <button class="dropdown-item">‚úèÔ∏è Edit</button>
                        <button class="dropdown-item">üìã Copy</button>
                        <button class="dropdown-item">üì§ Share</button>
                        <button class="dropdown-item">üìÅ Move</button>
                        <button class="dropdown-item">üóÇÔ∏è Archive</button>
                        <button class="dropdown-item">üóëÔ∏è Delete</button>
                    </div>
                </div>

                <div class="test-dropdown">
                    <button class="dropdown-trigger" onclick="toggleDropdown('dropdown4')">
                        Profile Menu
                    </button>
                    <div class="dropdown-menu" id="dropdown4" style="display: none;">
                        <button class="dropdown-item">üë§ View Profile</button>
                        <button class="dropdown-item">‚öôÔ∏è Settings</button>
                        <button class="dropdown-item">üîî Notifications</button>
                        <button class="dropdown-item">üè¢ Organization</button>
                        <button class="dropdown-item">üí∞ Billing</button>
                        <button class="dropdown-item">üîí Privacy</button>
                        <button class="dropdown-item">‚ùì Help</button>
                        <button class="dropdown-item">üö™ Sign Out</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>Test Results</h2>
            <button onclick="runTests()" style="padding: 10px 20px; background: #48bb78; color: white; border: none; border-radius: 6px; cursor: pointer; margin-bottom: 10px;">
                Run Automated Tests
            </button>
            <div class="test-results" id="testResults">
                Click "Run Automated Tests" to see detailed test results...
            </div>
        </div>
    </div>

    <script>
        let currentDevice = 'Default';
        let activeDropdown = null;
        let mobileBackdrop = null;

        // Update viewport info
        function updateViewportInfo() {
            const info = document.getElementById('viewportInfo');
            const width = window.innerWidth;
            const height = window.innerHeight;
            const isMobile = width <= 414;
            const isSmallMobile = width <= 375;
            
            info.textContent = `${currentDevice}: ${width}x${height} (${isMobile ? 'Mobile' : 'Desktop'}${isSmallMobile ? ' - Small' : ''})`;
        }

        // Simulate device sizes
        function simulateDevice(deviceName, width, height) {
            currentDevice = deviceName;
            
            // Update active button
            document.querySelectorAll('.device-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.device === deviceName) {
                    btn.classList.add('active');
                }
            });

            // Mock window size (for testing - this doesn't actually resize the viewport)
            // In a real implementation, you would use browser dev tools device simulation
            Object.defineProperty(window, 'innerWidth', {
                writable: true,
                configurable: true,
                value: width,
            });
            Object.defineProperty(window, 'innerHeight', {
                writable: true,
                configurable: true,
                value: height,
            });

            updateViewportInfo();
            
            // Update dropdown styles
            updateDropdownStyles();
        }

        // Update dropdown styles based on viewport
        function updateDropdownStyles() {
            const isMobile = window.innerWidth <= 414;
            
            document.querySelectorAll('.dropdown-menu').forEach(menu => {
                if (isMobile) {
                    menu.classList.add('mobile');
                } else {
                    menu.classList.remove('mobile');
                }
            });

            document.querySelectorAll('.dropdown-item').forEach(item => {
                if (isMobile) {
                    item.classList.add('mobile');
                } else {
                    item.classList.remove('mobile');
                }
            });
        }

        // Toggle dropdown
        function toggleDropdown(dropdownId) {
            const dropdown = document.getElementById(dropdownId);
            const isMobile = window.innerWidth <= 414;
            
            // Close other dropdowns
            if (activeDropdown && activeDropdown !== dropdown) {
                activeDropdown.style.display = 'none';
                if (mobileBackdrop) {
                    mobileBackdrop.remove();
                    mobileBackdrop = null;
                }
            }
            
            if (dropdown.style.display === 'none' || !dropdown.style.display) {
                // Open dropdown
                dropdown.style.display = 'block';
                activeDropdown = dropdown;
                
                // Add mobile backdrop if needed
                if (isMobile) {
                    mobileBackdrop = document.createElement('div');
                    mobileBackdrop.className = 'mobile-backdrop';
                    mobileBackdrop.onclick = () => closeAllDropdowns();
                    document.body.appendChild(mobileBackdrop);
                }
            } else {
                // Close dropdown
                closeAllDropdowns();
            }
        }

        // Close all dropdowns
        function closeAllDropdowns() {
            document.querySelectorAll('.dropdown-menu').forEach(menu => {
                menu.style.display = 'none';
            });
            
            if (mobileBackdrop) {
                mobileBackdrop.remove();
                mobileBackdrop = null;
            }
            
            activeDropdown = null;
        }

        // Run automated tests
        function runTests() {
            const results = document.getElementById('testResults');
            let output = '';
            
            output += 'Running Mobile Dropdown Responsiveness Tests...\n\n';
            
            const testDevices = [
                { name: 'iPhone SE', width: 375, height: 667 },
                { name: 'iPhone 11', width: 414, height: 896 },
                { name: 'iPhone 12/13/14', width: 390, height: 844 },
                { name: 'Galaxy S21', width: 360, height: 800 },
                { name: 'iPad Mini', width: 768, height: 1024 }
            ];
            
            testDevices.forEach(device => {
                output += `Testing ${device.name} (${device.width}x${device.height}):\n`;
                
                // Simulate device
                Object.defineProperty(window, 'innerWidth', { value: device.width, configurable: true });
                Object.defineProperty(window, 'innerHeight', { value: device.height, configurable: true });
                
                const isMobile = device.width <= 414;
                const isSmallMobile = device.width <= 375;
                
                output += `  ‚úì Viewport Detection: ${isMobile ? 'Mobile' : 'Desktop'}${isSmallMobile ? ' (Small)' : ''}\n`;
                output += `  ‚úì Screen Classification: ${isMobile ? 'Will use mobile styles' : 'Will use desktop styles'}\n`;
                output += `  ‚úì Available Height: ${device.height - 100}px\n`;
                
                // Test positioning logic
                if (isMobile) {
                    const dropdownWidth = isSmallMobile ? device.width - 16 : device.width - 32;
                    const maxHeight = device.height - 120;
                    output += `  ‚úì Mobile Dropdown Width: ${dropdownWidth}px\n`;
                    output += `  ‚úì Mobile Max Height: ${maxHeight}px\n`;
                    output += `  ‚úì Touch Optimizations: Enabled\n`;
                } else {
                    output += `  ‚úì Desktop Positioning: Standard absolute positioning\n`;
                }
                
                output += '\n';
            });
            
            output += '‚úÖ All tests completed!\n\n';
            output += 'Manual Testing Instructions:\n';
            output += '1. Use the device buttons above to simulate different screen sizes\n';
            output += '2. Click on the dropdown triggers to test positioning and scrolling\n';
            output += '3. On mobile viewports, dropdowns should:\n';
            output += '   - Center on screen with backdrop\n';
            output += '   - Have appropriate maximum height\n';
            output += '   - Support smooth scrolling\n';
            output += '   - Have touch-friendly interactions\n';
            output += '4. On desktop viewports, dropdowns should:\n';
            output += '   - Position relative to trigger\n';
            output += '   - Not exceed screen boundaries\n';
            
            results.textContent = output;
            results.scrollTop = 0;
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            updateViewportInfo();
            updateDropdownStyles();
            
            // Add device button event listeners
            document.querySelectorAll('.device-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const device = btn.dataset.device;
                    const width = parseInt(btn.dataset.width);
                    const height = parseInt(btn.dataset.height);
                    simulateDevice(device, width, height);
                });
            });
            
            // Close dropdowns when clicking outside
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.test-dropdown')) {
                    closeAllDropdowns();
                }
            });
            
            // Update on real window resize
            window.addEventListener('resize', () => {
                updateViewportInfo();
                updateDropdownStyles();
            });
        });
    </script>
</body>
</html>